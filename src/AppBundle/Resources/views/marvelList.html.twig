{% include '@App/base.html.twig' %}

{{ dump(offset) }}
{% for hero in heros %}

    <div class="spinner-grow text-danger" role="status">
        <span class="sr-only">Loading...</span>
    </div>

    <table class="table table-striped table-light w-75 m-auto text-center table-bordered marvelTable">
        <thead>
        <tr class="d-flex">
            <th scope="col" class="col-1">Name</th>
            <th scope="col"  class="col-3">Description</th>
            <th scope="col"  class="col-3">Picture</th>
            <th scope="col" class="col-1">Comics</th>
            <th scope="col"  class="col-3">Comics titles</th>
            <th scope="col"  class="col-1">Favorites</th>
        </tr>
        </thead>
        <tbody>
        <tr class="d-flex">
            <td class="col-sm-1" scope="row">
                <a href="{{ path('marvelHero', {'info' :  hero.id }) }}">{{ hero.name }}</a>
            </td>
            {% if hero.description is empty %}
                <td class="col-sm-3">No description available</td>
            {% else %}
            <td class="col-sm-3">{{ hero.description }}</td>
            {% endif %}
            <td class="col-sm-3"><img  class="img-fluid img-thumbnail rounded-circle" style="width: 200px; height: 200px;" src="{{ hero.thumbnail.path }}.{{ hero.thumbnail.extension }}"></td>
            <td class="col-sm-1">{{ hero.comics.available }}</td>
            <td class="col-sm-3 ">
                <ul class="">
                    {% for comic in hero.comics.items|slice(0,3) %}
                    <li class="">{{ comic.name }}</li>
                    {% endfor %}
                </ul>
            </td>
            {#{% if favorites == null %}#}
            {#<td class="col-sm-1"><a type="submit" class="btn btn-light btn-sm" href="{{ path('addFavorite',  { 'id' : hero.id, 'offset' : offset }) }}"><i class="far fa-star"></i></a></td>#}
            {#{% elseif favorites != null %}#}
            {% set break = false %}
            {% for favorite in favorites if not break %}
            {% if  hero.id == favorite.idHero %}
            <td class="col-sm-1"><a type="submit" class="btn btn-light btn-sm" href="{{ path('deleteFavorite',  { 'id' : hero.id, 'offset' : offset }) }}"><i class="fas fa-star"></i></a></td>
            {% set break = true %}
            {% endif %}
            {% endfor %}
                <td class="col-sm-1"><a type="submit" class="btn btn-light btn-sm" href="{{ path('addFavorite',  { 'id' : hero.id, 'offset' : offset }) }}"><i class="far fa-star"></i></a></td>


            {#{% endif %}#}

            {#<td class="col-sm-1">#}
                {#{% if favorites is empty %}#}
                {#{{ form_start(form, {'action': path('marvelList'), 'method' : 'POST', 'id' : 'formfavorite' }) }}#}

                {#{{ form_widget(form.idHero, {'value' : hero.id}) }}#}
                {#{{ form_widget(form.name, {'value' : hero.name}) }}#}
                {#{{ form_widget(form.path, {'value' :  hero.thumbnail.path ~ hero.thumbnail.extension }) }}#}
                {#{{ form_widget(form.description, {'value' : hero.description}) }}#}
                {#{{ form_widget(form.offset, {'value' : offset}) }}#}

                {#<button type="submit"><i class="far fa-star"></i></button>#}
                {#{{ form_end(form) }}#}
            {#</td>#}

            {#{% endif %}#}

            {#{% set break = false %}#}
            {#{% for favorite in favorites if not break %}#}
            {#{% if  hero.id == favorite.idHero %}#}
                {#<td class="col-sm-1"><a type="submit" class="btn btn-light btn-sm" href="{{ path('deleteFavorite',  { 'id' : hero.id, 'offset' : offset }) }}"><i class="fas fa-star"></i></a></td>#}
                {#{% set break = true %}#}
                {#{% endif %}#}
            {#{% endfor %}#}

            {#{% for favorite in favorites if not break %}#}
            {#{% if hero.id != favorite.idHero and form1 == true %}#}
                {#{{ form_start(form1, {'action': path('marvelList'), 'method' : 'POST' }) }}#}

            {#{{ form_widget(form1.idHero, {'value' : hero.id}) }}#}
            {#{{ form_widget(form1.name, {'value' : hero.name}) }}#}
            {#{{ form_widget(form1.path, {'value' :  hero.thumbnail.path ~ hero.thumbnail.extension }) }}#}
            {#{{ form_widget(form1.description, {'value' : hero.description}) }}#}
            {#{{ form_widget(form1.offset, {'value' : offset }) }}#}
                {#<td class="col-sm-1"><button type="submit"><i class="far fa-star"></i></button></td>#}
                {#{{ form_end(form1) }}#}

                {#{{ form_start(form2, {'action': path('marvelList'), 'method' : 'POST' }) }}#}

                {#{{ form_widget(form2.idHero, {'value' : hero.id}) }}#}
                {#{{ form_widget(form2.name, {'value' : hero.name}) }}#}
                {#{{ form_widget(form2.path, {'value' :  hero.thumbnail.path ~ hero.thumbnail.extension }) }}#}
                {#{{ form_widget(form2.description, {'value' : hero.description}) }}#}
                {#{{ form_widget(form2.offset, {'value' : offset }) }}#}

                {#<td class="col-sm-1"><button type="submit"><i class="far fa-star"></i></button></td>#}
            {#{{ form_end(form2) }}#}

                {#{{ form_start(form3, {'action': path('marvelList'), 'method' : 'POST' }) }}#}

                {#{{ form_widget(form3.idHero, {'value' : hero.id}) }}#}
                {#{{ form_widget(form3.name, {'value' : hero.name}) }}#}
                {#{{ form_widget(form3.path, {'value' :  hero.thumbnail.path ~ hero.thumbnail.extension }) }}#}
                {#{{ form_widget(form3.description, {'value' : hero.description}) }}#}
                {#{{ form_widget(form2.offset, {'value' : offset }) }}#}

                {#<td class="col-sm-1"><button type="submit"><i class="far fa-star"></i></button></td>#}
                {#{{ form_end(form3) }}#}
                {#{% set break = true %}#}
            {#{% endif %}#}



            {#{% endfor %}#}

            {#<td class="col-sm-1">#}
            {#{% if favorites is empty %}#}
                {#{{ form_start(form, {'action': path('marvelList'), 'method' : 'POST', 'id' : 'formfavorite' }) }}#}

                {#{{ form_widget(form.idHero, {'value' : hero.id}) }}#}
                {#{{ form_widget(form.name, {'value' : hero.name}) }}#}
                {#{{ form_widget(form.path, {'value' :  hero.thumbnail.path ~ hero.thumbnail.extension }) }}#}
                {#{{ form_widget(form.description, {'value' : hero.description}) }}#}
                {#{{ form_widget(form.offset, {'value' : offset}) }}#}

               {#<button type="submit"><i class="far fa-star"></i></button>#}
                {#{{ form_end(form) }}#}
            {#</td>#}

            {#{% endif %}#}




        </tr>
        </tbody>
    </table>

{% endfor %}
    <nav aria-label="Page navigation example border">
        <ul class="pagination justify-content-center mb-2 mt-5">
            {% if offset <= 115 %}
            <li class="page-item">
                <a class="page-link" href="{{ path('marvelList', {'offset' :  offset - 3 }) }}" aria-label="Previous">
                    Previous
                </a>
            </li>
            {% endif %}
            {% if offset == 117 %}
                <li class="page-item">
                    <a class="page-link" href="{{ path('marvelList', {'offset' :  offset - 2 }) }}" aria-label="Previous">
                        Previous
                    </a>
                </li>
            {% endif %}
            {% if offset < 115 %}
            <li class="page-item">
                <a class="page-link" href="{{ path('marvelList', {'offset' : offset + 3 }) }}" aria-label="Next">
                   Next
                </a>
            </li>
            {% endif %}
            {% if offset == 115 %}
                <li class="page-item">
                    <a class="page-link" href="{{ path('marvelList', {'offset' : offset + 2 }) }}" aria-label="Next">
                       Next
                    </a>
                </li>
            {% endif %}
        </ul>
    </nav>






